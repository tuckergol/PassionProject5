from flask import Flask, request, jsonify
from geopy.geocoders import Nominatim  # Geocoding library

app = Flask(__name__)

geolocator = Nominatim(user_agent="geo_guesser_app")  # Initialize the geocoder

@app.route('/api/get_country', methods=['POST'])
def get_country():
    try:
        # Get latitude and longitude from the POST request
        data = request.get_json()
        lat = float(data.get('latitude'))
        lon = float(data.get('longitude'))

        # Perform reverse geocoding to get the country
        location = geolocator.reverse(f"{lat}, {lon}")
        address = location.raw

        # Extract the country information
        country = address.get('address', {}).get('country')

        if country:
            return jsonify({"country": country})
        else:
            return jsonify({"error": "Country not found for the given coordinates."}), 404
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == "__main__":
    app.run(debug=True)


# Define a dictionary mapping coordinates to countries
    country_coordinates = {
    
(28.6139, 77.2090): "India",
 (35.8617, 104.1954): "China",
 (37.7749, -122.4194): "United States",
 (-6.2088, 106.8456): "Indonesia",
 (30.3753, 69.3451): "Pakistan",
 (9.0820, 8.6753): "Nigeria",
 (-15.7801, -47.9292): "Brazil",
 (23.6850, 90.3563): "Bangladesh",
 (55.7558, 37.6176): "Russia",
 (19.4326, -99.1332): "Mexico",
 (9.1450, 40.489673): "Ethiopia",
 (35.682839, 139.759455): "Japan",
 (12.8797, 121.7740): "Philippines",
 (26.8206, 30.8025): "Egypt",
 (-4.0383, 21.7587): "DR Congo",
 (14.0583, 108.2772): "Vietnam",
 (32.4279, 53.6880): "Iran",
 (38.9637, 35.2433): "Turkey",
 (51.1657, 10.4515): "Germany",
 (15.8700, 100.9925): "Thailand",
 (51.5074, -0.1278): "United Kingdom",
 (-6.369028, 34.888822): "Tanzania",
 (48.8566, 2.3522): "France",
 (-30.5595, 22.9375): "South Africa",
 (41.8719, 12.5675): "Italy",
 (-1.286389, 36.817223): "Kenya",
 (21.9162, 95.9560): "Myanmar",
 (4.5709, -74.2973): "Colombia",
 (37.5665, 126.9780): "South Korea",
 (1.3733, 32.2903): "Uganda",
 (12.6392, 29.3328): "Sudan",
 (40.4168, -3.7038): "Spain",
 (-38.4161, -63.6167): "Argentina",
 (28.0339, 1.6596): "Algeria",
 (33.3152, 44.3661): "Iraq",
 (33.9391, 67.7100): "Afghanistan",
 (51.9194, 19.1451): "Poland",
 (56.1304, -106.3468): "Canada",
 (31.7917, -7.0926): "Morocco",
 (23.8859, 45.0792): "Saudi Arabia",
 (48.3794, 31.1656): "Ukraine",
 (-11.2027, 17.8739): "Angola",
 (41.3775, 64.5853): "Uzbekistan",
 (15.5527, 48.5164): "Yemen",
 (-9.1900, -75.0152): "Peru",
 (4.2105, 101.9758): "Malaysia",
 (7.2500, -0.0662): "Ghana",
 (-18.6657, 35.5296): "Mozambique",
 (28.3949, 84.1240): "Nepal",
 (-18.8792, 47.5079): "Madagascar"
 (7.5400, -5.5471): "Côte d'Ivoire",
 (6.4238, -66.5897): "Venezuela",
 (5.9641, 12.6533): "Cameroon",
 (17.6078, 8.0817): "Niger",
 (-25.2744, 133.7751): "Australia",
 (40.3399, 127.5101): "North Korea",
 (23.6978, 120.9605): "Taiwan",
 (17.5707, -3.9962): "Mali",
 (12.2383, -1.5616): "Burkina Faso",
 (34.8021, 38.9968): "Syria",
 (7.8731, 80.7718): "Sri Lanka",
 (-13.2543, 34.3015): "Malawi",
 (-13.1339, 27.8493): "Zambia",
 (45.9432, 24.9668): "Romania",
 (-35.6751, -71.543): "Chile",
 (48.0196, 66.9237): "Kazakhstan",
 (15.4542, 18.7322): "Chad",
 (-1.2921, 36.8219): "Kenya",
 (18.3358, -64.8963): "Netherlands",
 (12.5657, 104.9909): "Cambodia",
 (-19.0154, 29.1549): "Zimbabwe",
 (9.9456, -9.6966): "Guinea",
 (-1.9403, 29.8739): "Rwanda",
 (9.3077, 2.3158): "Benin",
 (-3.3731, 29.9189): "Burundi",
 (33.9391, 9.5375): "Tunisia",
 (-16.2902, -63.5887): "Bolivia",
 (18.9712, -72.2852): "Haiti",
 (50.8503, 4.3517): "Belgium",
 (30.5852, 36.2384): "Jordan",
 (18.7357, -70.1627): "Dominican Republic",
 (21.5218, -77.7812): "Cuba",
 (6.8770, 31.3070): "South Sudan",
 (60.1282, 18.6435): "Sweden",
 (15.1990, -86.2419): "Honduras",
 (49.8175, 15.4729): "Czech Republic (Czechia)",
 (40.1431, 47.5769): "Azerbaijan",
 (39.0742, 21.8243): "Greece",
 (-6.314993, 143.955550): "Papua New Guinea",
 (39.3999, -8.2245): "Portugal",
 (47.1625, 19.5033): "Hungary",
 (38.8610, 71.2761): "Tajikistan",
 (23.4241, 53.8478): "United Arab Emirates",
 (53.7098, 27.9534): "Belarus",
 (31.0461, 34.8516): "Israel",
 (8.6195, 0.8248): "Togo",
 (47.5162, 14.5501): "Austria",
(46.8182, 8.2275): "Switzerland",
 (8.4606, -11.7799): "Sierra Leone",
 (19.8563, 102.4955): "Laos",
 (22.3964, 114.1095): "Hong Kong",
 (44.0165, 21.0059): "Serbia",
 (12.8654, -85.2072): "Nicaragua",
 (26.3351, 17.2283): "Libya",
 (-23.4425, -58.4438): "Paraguay",
 (41.2044, 74.7661): "Kyrgyzstan",
 (42.7339, 25.4858): "Bulgaria",
 (38.9697, 59.5563): "Turkmenistan",
 (13.7942, -88.8965): "El Salvador",
 (-0.2280, 15.8277): "Congo",
 (1.3521, 103.8198): "Singapore",
 (56.2639, 9.5018): "Denmark",
 (48.6690, 19.6990): "Slovakia",
 (6.6111, 20.9394): "Central African Republic",
 (61.9241, 25.7482): "Finland",
 (60.4720, 8.4689): "Norway",
 (6.4281, -9.4295): "Liberia",
 (31.9522, 35.2332): "State of Palestine",
 (33.8547, 35.8623): "Lebanon",
 (-40.9006, 174.8860): "New Zealand",
 (9.7489, -83.7534): "Costa Rica",
 (53.3498, -6.2603): "Ireland",
 (21.0079, -10.9408): "Mauritania",
 (21.4735, 55.9754): "Oman",
 (8.5379, -80.7821): "Panama",
 (29.3759, 47.9774): "Kuwait",
 (45.1000, 15.2000): "Croatia",
 (15.1794, 39.7823): "Eritrea",
 (42.3154, 43.3569): "Georgia",
 (46.8625, 103.8467): "Mongolia",
 (47.4116, 28.3699): "Moldova",
 (-32.4228, -55.7658): "Uruguay",
 (18.2208, -66.5901): "Puerto Rico",
 (43.9159, 17.6791): "Bosnia and Herzegovina",
 (41.1533, 20.1683): "Albania",
 (18.1096, -77.2975): "Jamaica",
 (40.0691, 45.0382): "Armenia",
 (13.4432, -15.3101): "Gambia",
 (55.1694, 23.8813): "Lithuania",
 (25.3548, 51.1839): "Qatar",
 (-22.3285, 24.6849): "Botswana",
 (-22.9576, 18.4904): "Namibia",
 (-0.8037, 11.6094): "Gabon",
 (-29.6099, 28.2336): "Lesotho",
 (11.8037, -15.1804): "Guinea-Bissau",
 (46.1512, 14.9955): "Slovenia",
 (41.6086, 21.7453): "North Macedonia"
 (56.8796, 24.6032): "Latvia",
 (1.6508, 10.2679): "Equatorial Guinea",
 (10.6918, -61.2225): "Trinidad and Tobago",
 (25.9304, 50.6378): "Bahrain",
 (-8.8742, 125.7275): "Timor-Leste",
 (58.5953, 25.0136): "Estonia",
 (-20.348404, 57.552152): "Mauritius",
 (35.1264, 33.4299): "Cyprus",
 (-26.5225, 31.4659): "Eswatini",
 (11.8251, 42.5904): "Djibouti",
 (-21.1151, 55.5364): "Réunion",
 (-17.7134, 178.0650): "Fiji",
 (-11.8750, 43.8722): "Comoros",
 (4.8604, -58.9302): "Guyana",
 (27.5142, 90.4336): "Bhutan",
 (-9.7448, 160.0759): "Solomon Islands",
 (22.1987, 113.5439): "Macao",
 (49.8153, 6.1296): "Luxembourg",
 (42.4602, 19.2595): "Montenegro",
 (3.9193, -56.0278): "Suriname",
 (16.5388, -23.0418): "Cabo Verde",
 (24.2155, -12.8858): "Western Sahara",
 (7.4256, 150.5508): "Micronesia",
 (35.9375, 14.3754): "Malta",
 (3.2028, 73.2207): "Maldives",
 (4.5353, 114.7277): "Brunei",
 (25.0343, -77.3963): "Bahamas",
 (17.1899, -88.4976): "Belize",
 (16.2650, -61.5510): "Guadeloupe",
 (64.9631, -19.0208): "Iceland",
 (14.6415, -61.0242): "Martinique",
 (-12.8275, 45.1662): "Mayotte",
 (-15.3767, 166.9592): "Vanuatu",
 (3.9339, -53.1258): "French Guiana",
 (-17.6797, -149.4068): "French Polynesia",
 (-20.9043, 165.6180): "New Caledonia",
 (13.1939, -59.5432): "Barbados",
 (0.1864, 6.6131): "Sao Tome & Principe",
 (-13.7590, -172.1046): "Samoa",
 (12.1696, -68.9900): "Curaçao",
 (13.9094, -60.9789): "Saint Lucia",
 (13.4443, 144.7937): "Guam",
 (1.8709, 157.3627): "Kiribati",
 (12.0522, -61.7415): "Grenada",
 (-21.1789, -175.1982): "Tonga",
 (-4.6796, 55.4920): "Seychelles",
 (12.5211, -69.9683): "Aruba",
 (13.2528, -61.1970): "St. Vincent & Grenadines",
 (18.3358, -64.8963): "U.S. Virgin Islands",
 (17.0608, -61.7964): "Antigua and Barbuda",
 (54.2361, -4.5481): "Isle of Man",
 (42.5462, 1.6016): "Andorra",
 (15.4149, -61.3709): "Dominica",
 (19.3133, -81.2546): "Cayman Islands",
 (32.3078, -64.7505): "Bermuda",
 (71.7069, -42.6043): "Greenland",
 (62.0032, -6.7673): "Faeroe Islands",
 (15.0969, 145.6739): "Northern Mariana Islands",
 (17.3435, -62.7558): "Saint Kitts & Nevis",
 (21.6940, -71.7979): "Turks and Caicos",
 (18.0425, -63.0548): "Sint Maarten",
 (-14.2710, -170.1322): "American Samoa",
 (7.1315, 171.1845): "Marshall Islands",
 (47.1595, 9.5247): "Liechtenstein",
 (43.7384, 7.4246): "Monaco",
 (43.9424, 12.4578): "San Marino",
 (36.1408, -5.3536): "Gibraltar",
 (18.0754, -63.0597): "Saint Martin",
 (18.4207, -64.6399): "British Virgin Islands",
 (12.1734, -68.8682): "Caribbean Netherlands",
 (-7.5225, 134.5690): "Palau",
 (-21.2367, -159.7777): "Cook Islands",
 (18.2206, -63.0681): "Anguilla",
 (-0.5477, 166.9195): "Nauru",
 (-13.2826, -176.1735): "Wallis & Futuna",
 (-8.9218, 171.8299): "Tuvalu",
 (17.9047, -62.8436): "Saint Barthelemy",
 (46.8852, -56.3159): "Saint Pierre & Miquelon",
 (-15.9653, -5.7088): "Saint Helena",
 (16.7419, -62.1924): "Montserrat",
 (-51.7963, -59.5236): "Falkland Islands",
 (-19.0544, -169.8672): "Niue",
 (-8.9674, -171.8559): "Tokelau",
 (41.9029, 12.4534): "Holy Sea",

}



